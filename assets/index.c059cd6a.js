import{i as T,g as q,a as F,d as E,o as P,c as W,s as Y,b as z,r as p,e as H,f as V,h as d,j as u,k as e,n as v,w as _,u as c,t as h,l as y,m as S,p as f,q as C,v as L,x as b,F as D,y as j,z as G,A as X,B as J,C as Q,D as x,E as Z,G as ee,H as te,I as se,J as N,K as k,L as oe,M as ne,N as ae,O as le,P as ie,Q as re,R as ce,S as de,T as ue,U as pe,V as he,W as _e,X as me}from"./vendor.6ffcc8f2.js";const ve=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}};ve();const fe={apiKey:"AIzaSyAratVSSTqOUOp5KKIgn4eK1W2abM17Fq0",authDomain:"noteballs-996a7.firebaseapp.com",projectId:"noteballs-996a7",storageBucket:"noteballs-996a7.appspot.com",messagingSenderId:"320251490867",appId:"1:320251490867:web:3daab6282d194e4ad32946",measurementId:"G-YXV68W5YVT"},U=T(fe),$=q(U),g=F(U),R=E("storeAuth",{state:()=>({user:{}}),actions:{init(){P(g,o=>{o?(this.user.id=o.uid,this.user.email=o.email,this.router.push("/")):(this.user={},this.router.replace("/auth"))})},registerUser({email:o,password:s}){W(g,o,s).then(t=>{t.user}).catch(t=>{console.error(t)})},logInUser({email:o,password:s}){Y(g,o,s).then(t=>{t.user}).catch(t=>{console.error(t)})},logOutUser(){z(g).then(()=>{}).catch(o=>{})}}});const be={"aria-label":"main navigation",class:"navbar is-success",role:"navigation"},ge={class:"container is-max-desktop px-2"},ye=e("div",{class:"navbar-item is-size-4 is-family-monospace"}," Noteballs ",-1),$e=e("span",{"aria-hidden":"true"},null,-1),Ne=e("span",{"aria-hidden":"true"},null,-1),ke=e("span",{"aria-hidden":"true"},null,-1),Ce=[$e,Ne,ke],we=["onClick"],xe={class:"navbar-end"},Se=C(" Notes "),Ve=C(" Stats "),Re={setup(o){const s=R(),t=p(!1),l=p(null),n=p(null);H(l,i=>t.value=!1,{ignore:[n]});const a=()=>{t.value=!1,s.logOutUser()};return(i,r)=>{const m=V("RouterLink");return d(),u("nav",be,[e("div",ge,[e("div",{ref_key:"navTitleRef",ref:n,class:"navbar-brand"},[ye,e("a",{class:v([{"is-active":t.value},"navbar-burger"]),"aria-expanded":"false","aria-label":"menu","data-target":"navbarBasicExample",role:"button",onClick:r[0]||(r[0]=_(A=>t.value=!t.value,["prevent"]))},Ce,2),c(s).user.id?(d(),u("button",{key:0,class:"button is-primary",onClick:_(a,["prevent"])},"Log out "+h(c(s).user.email),9,we)):y("",!0)],512),e("div",{id:"navbarBasicExample",ref_key:"navbarRef",ref:l,class:v([{"is-active":t.value},"navbar-menu"])},[e("div",xe,[c(s).user.id?(d(),S(m,{key:0,"active-class":"is-active",class:"navbar-item",to:"/",onClick:r[1]||(r[1]=A=>t.value=!1)},{default:f(()=>[Se]),_:1})):y("",!0),c(s).user.id?(d(),S(m,{key:1,"active-class":"is-active",class:"navbar-item",to:"/stats",onClick:r[2]||(r[2]=A=>t.value=!1)},{default:f(()=>[Ve]),_:1})):y("",!0)])],2)])])}}};const Ae={class:"container is-max-desktop px-2 py-4"},Ee={setup(o){const s=R();return L(()=>{s.init()}),(t,l)=>{const n=V("RouterView");return d(),u(D,null,[b(Re),e("div",Ae,[b(n)])],64)}}},Le=j(X($,"notes"),G("id","desc")),w=E("storeNotes",{state:()=>({notes:[]}),actions:{async getNotes(){try{J(Le,o=>{this.notes=[],o.forEach(s=>{this.notes.push({id:s.id,content:s.data().content})})})}catch(o){console.error("Error fetching notes: ",o)}},async addNote(o){let s=new Date().getTime(),t=s.toString();await Q(x($,"notes",t),{id:t,content:o})},async deleteNote(o){await Z(x($,"notes",o))},async updateNote(o,s){let t=this.notes.findIndex(n=>n.id===o);this.notes[t].content=s;const l=x($,"notes",o);await ee(l,{content:s})}},getters:{getNoteContent:o=>s=>o.notes.filter(t=>t.id===s)[0].content,totalNotesCount:o=>o.notes.length,totalCharactersCount:o=>{let s=0;return o.notes.forEach(t=>{s+=t.content.length}),s}}}),De={class:"card mb-4"},Ue={class:"card-content"},Ie={class:"content"},Oe={class:"has-text-left has-text-grey-light mt-2"},Be={class:"has-text-right has-text-grey-light mt-2"},Me={class:"card-footer"},Ke=C(" Edit "),Te={props:{note:{type:Object,required:!0}},setup(o){const s=o,t=w(),l=te(()=>{let a=s.note.content.length,i=a>1?"characters":"character";return`${a} ${i}`}),n=a=>se(new Date(+a),"DD.MM.YYYY HH:mm:ss").value;return(a,i)=>{const r=V("RouterLink");return d(),u("div",De,[e("div",Ue,[e("div",Ie,[C(h(o.note.content)+" ",1),e("div",Oe,[e("small",null,h(n(o.note.id)),1)]),e("div",Be,[e("small",null,h(c(l)),1)])])]),e("footer",Me,[b(r,{to:`/editNote/${o.note.id}`,class:"card-footer-item",href:"#"},{default:f(()=>[Ke]),_:1},8,["to"]),e("a",{class:"card-footer-item",href:"#",onClick:i[0]||(i[0]=_(m=>c(t).deleteNote(o.note.id),["prevent"]))}," Delete ")])])}}},I={mounted:o=>{o.focus()}},qe={key:0,class:"label has-text-white"},Fe={class:"field"},Pe={class:"control"},We=["placeholder"],Ye={class:"field is-grouped is-grouped-right"},ze={class:"control"},O={props:{modelValue:{type:String,required:!0},bgColor:{type:String,default:"success"},placeholder:{type:String,default:"Type something..."},label:{type:String}},emits:["update:modelValue"],setup(o,{emit:s}){const l=p(o.modelValue);return(n,a)=>(d(),u("div",{class:v([`has-background-${o.bgColor}-dark`,"card p-4 mb-5"])},[o.label?(d(),u("label",qe,h(o.label),1)):y("",!0),e("div",Fe,[e("div",Pe,[N(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=i=>l.value=i),placeholder:o.placeholder,class:"textarea",onInput:a[1]||(a[1]=i=>n.$emit("update:modelValue",l.value))},null,40,We),[[k,l.value],[c(I)]])])]),e("div",Ye,[e("div",ze,[oe(n.$slots,"buttons")])])],2))}};function B(o,s){ne(o,t=>{t.length>s&&alert(`Max only ${s} length note!!!`)},{immediate:!0})}const He={class:"notes"},je={setup(o){const s=w();L(async()=>{await s.getNotes()});const t=p(""),l=p(null),n=()=>{t.value!==""&&t.value!=null&&(s.addNote(t.value),t.value="")};return B(t,30),(a,i)=>(d(),u("div",He,[b(O,{ref_key:"addEditNoteRef",ref:l,modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),placeholder:"Add a new note",onKeydown:ae(_(n,["exact","prevent"]),["enter"])},{buttons:f(()=>[e("button",{class:"button is-link has-background-success",onClick:n}," Add New Note ")]),_:1},8,["modelValue","onKeydown"]),(d(!0),u(D,null,le(c(s).notes,r=>(d(),S(Te,{key:r.id,note:r},null,8,["note"]))),128))]))}},Ge={class:"edit-note"},Xe=["disabled"],Je={setup(o){const s=ie(),t=re(),l=w(),n=p("");n.value=l.getNoteContent(s.params.id);const a=()=>{l.updateNote(s.params.id,n.value),t.replace("/")};return(i,r)=>(d(),u("div",Ge,[b(O,{ref:"addEditNoteRef",modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=m=>n.value=m),bgColor:"link",label:"Edit Note",placeholder:"Edit note"},{buttons:f(()=>[e("button",{class:"button is-link is-light mr-2",onClick:r[0]||(r[0]=m=>i.$router.back())}," Cancel "),e("button",{disabled:!n.value,class:"button is-link has-background-link",onClick:a}," Save Note ",8,Xe)]),_:1},8,["modelValue"])]))}},Qe={class:"stats"},Ze={class:"table is-fullwidth"},et=e("thead",null,[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1),tt=e("td",null,"Number of Notes",-1),st=e("td",null,"Number of Characters (of all notes)",-1),ot={setup(o){const s=w();let t=p("");return B(t,20),(l,n)=>(d(),u("div",Qe,[e("table",Ze,[et,e("tbody",null,[e("tr",null,[tt,e("td",null,h(c(s).totalNotesCount),1)]),e("tr",null,[st,e("td",null,h(c(s).totalCharactersCount),1)])])]),N(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>ce(t)?t.value=a:t=a),class:"input",placeholder:"Insert value",type:"text"},null,512),[[k,c(t)],[c(I)]])]))}},nt={class:"auth"},at={class:"tabs is-centered"},lt=e("a",null,"Login",-1),it=[lt],rt=e("a",null,"Register",-1),ct=[rt],dt={class:"card"},ut={class:"card-content"},pt={class:"content"},ht=["onSubmit"],_t={class:"field"},mt=e("label",{class:"label"},"Email",-1),vt={class:"control"},ft={class:"field"},bt=e("label",{class:"label"},"Password",-1),gt={class:"control"},yt=e("button",{class:"button is-primary"},"Submit",-1),$t={setup(o){const s=p(!0),t=R(),l=de({email:"",password:""}),n=()=>{!l.password||!l.email?alert("Fill the field!s"):s.value?t.logInUser(l):t.registerUser(l)};return(a,i)=>(d(),u("div",nt,[e("div",at,[e("ul",null,[e("li",{class:v({"is-active":s.value}),onClick:i[0]||(i[0]=_(r=>s.value=!0,["prevent"]))},it,2),e("li",{class:v({"is-active":!s.value}),onClick:i[1]||(i[1]=_(r=>s.value=!1,["prevent"]))},ct,2)])]),e("div",dt,[e("div",ut,[e("div",pt,[e("h2",null,h(s.value?"Login":"Register"),1),e("form",{onSubmit:_(n,["prevent"])},[e("div",_t,[mt,e("div",vt,[N(e("input",{"onUpdate:modelValue":i[2]||(i[2]=r=>c(l).email=r),class:"input",placeholder:"e.g. alexsmith@gmail.com",type:"email"},null,512),[[k,c(l).email]])])]),e("div",ft,[bt,e("div",gt,[N(e("input",{"onUpdate:modelValue":i[3]||(i[3]=r=>c(l).password=r),class:"input",placeholder:"...",type:"password"},null,512),[[k,c(l).password]])])]),yt],40,ht)])])])]))}},Nt=[{path:"/",name:"notes",component:je},{path:"/editNote/:id",name:"edit-note",component:Je},{path:"/stats",name:"stats",component:ot},{path:"/auth",name:"auth",component:$t}],M=ue({history:pe(),routes:Nt}),K=he();K.use(({store:o})=>{o.router=_e(M)});me(Ee).use(K).use(M).mount("#app");

import{i as q,g as F,a as P,d as U,c as W,q as Y,o as z,b as H,e as j,f as G,h as E,u as Q,j as X,k as J,s as Z,l as ee,r as h,m as te,n as R,p as d,t as u,v as e,w as f,x as _,y as c,z as p,A as N,B as S,C as b,D as C,E as se,F as g,G as I,H as oe,I as ae,J as k,K as ne,L as le,M as ie,N as re,O as ce,P as de,Q as V,R as ue,S as he,T as pe,U as _e,V as me,W as ve,X as fe}from"./vendor.70d7c1c6.js";const be=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}};be();const ge={apiKey:"AIzaSyAratVSSTqOUOp5KKIgn4eK1W2abM17Fq0",authDomain:"noteballs-996a7.firebaseapp.com",projectId:"noteballs-996a7",storageBucket:"noteballs-996a7.appspot.com",messagingSenderId:"320251490867",appId:"1:320251490867:web:3daab6282d194e4ad32946",measurementId:"G-YXV68W5YVT"},O=q(ge),ye=F(O),$=P(O);let v,D,x=null;const y=U("storeNotes",{state:()=>({notes:[],notesLoaded:!1}),actions:{init(){const s=w();v=W(ye,"users",s.user.id,"notes"),D=Y(v,z("date","desc")),this.getNotes()},async getNotes(){this.notesLoaded=!1,x=H(D,s=>{let t=[];s.forEach(o=>{let n={id:o.id,content:o.data().content,date:o.data().date};t.push(n)}),this.notes=t,this.notesLoaded=!0})},async addNote(s){let t=new Date().getTime(),o=t.toString();await j(v,{content:s,date:o})},async deleteNote(s){await G(E(v,s))},async updateNote(s,t){await Q(E(v,s),{content:t})},clearNotes(){this.notes=[],x&&x()}},getters:{getNoteContent:s=>t=>s.notes.filter(o=>o.id===t)[0].content,totalNotesCount:s=>s.notes.length,totalCharactersCount:s=>{let t=0;return s.notes.forEach(o=>{t+=o.content.length}),t}}}),w=U("storeAuth",{state:()=>({user:{}}),getters:{getUserId:s=>{var t;return(t=s==null?void 0:s.user)==null?void 0:t.id}},actions:{init(){X($,s=>{const t=y();s?(this.user.id=s.uid,this.user.email=s.email,this.router.push("/"),t.init()):(this.user={},this.router.replace("/auth"),t.clearNotes())})},registerUser({email:s,password:t}){J($,s,t).catch(o=>{console.error(o)})},logInUser({email:s,password:t}){Z($,s,t).catch(o=>{console.error(o)})},logOutUser(){ee($).then(()=>{}).catch(s=>{console.error(s)})}}});const $e={"aria-label":"main navigation",class:"navbar is-success",role:"navigation"},Ne={class:"container is-max-desktop px-2"},ke=e("div",{class:"navbar-item is-size-4 is-family-monospace"}," Noteballs ",-1),Ce=e("span",{"aria-hidden":"true"},null,-1),we=e("span",{"aria-hidden":"true"},null,-1),xe=e("span",{"aria-hidden":"true"},null,-1),Se=[Ce,we,xe],Ve=["onClick"],Re={class:"navbar-end"},Ae=C(" Notes "),Le=C(" Stats "),Ee={setup(s){const t=w(),o=h(!1),n=h(null),a=h(null);te(n,i=>o.value=!1,{ignore:[a]});const l=()=>{o.value=!1,t.logOutUser()};return(i,r)=>{const m=R("RouterLink");return d(),u("nav",$e,[e("div",Ne,[e("div",{ref_key:"navTitleRef",ref:a,class:"navbar-brand"},[ke,e("a",{class:f([{"is-active":o.value},"navbar-burger"]),"aria-expanded":"false","aria-label":"menu","data-target":"navbarBasicExample",role:"button",onClick:r[0]||(r[0]=_(L=>o.value=!o.value,["prevent"]))},Se,2),c(t).user.id?(d(),u("button",{key:0,class:"button is-primary",onClick:_(l,["prevent"])},"Log out "+p(c(t).user.email),9,Ve)):N("",!0)],512),e("div",{id:"navbarBasicExample",ref_key:"navbarRef",ref:n,class:f([{"is-active":o.value},"navbar-menu"])},[e("div",Re,[c(t).user.id?(d(),S(m,{key:0,"active-class":"is-active",class:"navbar-item",to:"/",onClick:r[1]||(r[1]=L=>o.value=!1)},{default:b(()=>[Ae]),_:1})):N("",!0),c(t).user.id?(d(),S(m,{key:1,"active-class":"is-active",class:"navbar-item",to:"/stats",onClick:r[2]||(r[2]=L=>o.value=!1)},{default:b(()=>[Le]),_:1})):N("",!0)])],2)])])}}};const De={class:"container is-max-desktop px-2 py-4"},Ue={setup(s){const t=w();return se(()=>{t.init()}),(o,n)=>{const a=R("RouterView");return d(),u(I,null,[g(Ee),e("div",De,[g(a)])],64)}}},Ie={class:"card mb-4"},Oe={class:"card-content"},Be={class:"content"},Me={class:"has-text-left has-text-grey-light mt-2"},Ke={class:"has-text-right has-text-grey-light mt-2"},Te={class:"card-footer"},qe=C(" Edit "),Fe={props:{note:{type:Object,required:!0}},setup(s){const t=s,o=y(),n=oe(()=>{let l=t.note.content.length,i=l>1?"characters":"character";return`${l} ${i}`}),a=l=>ae(new Date(+l),"DD.MM.YYYY HH:mm:ss").value;return(l,i)=>{const r=R("RouterLink");return d(),u("div",Ie,[e("div",Oe,[e("div",Be,[C(p(s.note.content)+" ",1),e("div",Me,[e("small",null,p(a(s.note.date)),1)]),e("div",Ke,[e("small",null,p(c(n)),1)])])]),e("footer",Te,[g(r,{to:`/editNote/${s.note.id}`,class:"card-footer-item",href:"#"},{default:b(()=>[qe]),_:1},8,["to"]),e("a",{class:"card-footer-item",href:"#",onClick:i[0]||(i[0]=_(m=>c(o).deleteNote(s.note.id),["prevent"]))}," Delete ")])])}}},B={mounted:s=>{s.focus()}},Pe={key:0,class:"label has-text-white"},We={class:"field"},Ye={class:"control"},ze=["placeholder","value"],He={class:"field is-grouped is-grouped-right"},je={class:"control"},M={props:{modelValue:{type:String,required:!0},bgColor:{type:String,default:"success"},placeholder:{type:String,default:"Type something..."},label:{type:String}},emits:["update:modelValue"],setup(s,{emit:t}){const o=s;return(n,a)=>(d(),u("div",{class:f([`has-background-${s.bgColor}-dark`,"card p-4 mb-5"])},[s.label?(d(),u("label",Pe,p(s.label),1)):N("",!0),e("div",We,[e("div",Ye,[k(e("textarea",{placeholder:s.placeholder,value:o.modelValue,class:"textarea",onInput:a[0]||(a[0]=l=>n.$emit("update:modelValue",l.target.value))},null,40,ze),[[c(B)]])])]),e("div",He,[e("div",je,[ne(n.$slots,"buttons")])])],2))}};function K(s,t){le(s,o=>{o.length>t&&alert(`Max only ${t} length note!!!`)},{immediate:!0})}const Ge={class:"notes"},Qe=["disabled"],Xe={setup(s){const t=y(),o=h(""),n=h(null),a=()=>{o.value!==""&&o.value!=null&&(t.addNote(o.value),o.value="")};return K(o,30),(l,i)=>(d(),u("div",Ge,[g(M,{ref_key:"addEditNoteRef",ref:n,modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r),placeholder:"Add a new note",onKeydown:ie(_(a,["exact","prevent"]),["enter"])},{buttons:b(()=>[e("button",{disabled:o.value==="",class:"button is-link has-background-success",onClick:a}," Add New Note ",8,Qe)]),_:1},8,["modelValue","onKeydown"]),(d(!0),u(I,null,re(c(t).notes,r=>(d(),S(Fe,{key:r.id,note:r},null,8,["note"]))),128))]))}},Je={class:"edit-note"},Ze=["disabled"],et={setup(s){const t=ce(),o=de(),n=y(),a=h("");a.value=n.getNoteContent(t.params.id);const l=()=>{n.updateNote(t.params.id,a.value),o.replace("/")};return(i,r)=>(d(),u("div",Je,[g(M,{ref:"addEditNoteRef",modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=m=>a.value=m),bgColor:"link",label:"Edit Note",placeholder:"Edit note"},{buttons:b(()=>[e("button",{class:"button is-link is-light mr-2",onClick:r[0]||(r[0]=m=>i.$router.back())}," Cancel "),e("button",{disabled:!a.value,class:"button is-link has-background-link",onClick:l}," Save Note ",8,Ze)]),_:1},8,["modelValue"])]))}},tt={class:"stats"},st={class:"table is-fullwidth"},ot=e("thead",null,[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1),at=e("td",null,"Number of Notes",-1),nt=e("td",null,"Number of Characters (of all notes)",-1),lt={setup(s){const t=y();let o=h("");return K(o,20),(n,a)=>(d(),u("div",tt,[e("table",st,[ot,e("tbody",null,[e("tr",null,[at,e("td",null,p(c(t).totalNotesCount),1)]),e("tr",null,[nt,e("td",null,p(c(t).totalCharactersCount),1)])])]),k(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>ue(o)?o.value=l:o=l),class:"input",placeholder:"Insert value",type:"text"},null,512),[[V,c(o)],[c(B)]])]))}},it={class:"auth"},rt={class:"tabs is-centered"},ct=e("a",null,"Login",-1),dt=[ct],ut=e("a",null,"Register",-1),ht=[ut],pt={class:"card"},_t={class:"card-content"},mt={class:"content"},vt=["onSubmit"],ft={class:"field"},bt=e("label",{class:"label"},"Email",-1),gt={class:"control"},yt={class:"field"},$t=e("label",{class:"label"},"Password",-1),Nt={class:"control"},kt=e("button",{class:"button is-primary"},"Submit",-1),Ct={setup(s){const t=h(!0),o=w(),n=he({email:"",password:""}),a=()=>{!n.password||!n.email?alert("Fill the field!s"):t.value?o.logInUser(n):o.registerUser(n)};return(l,i)=>(d(),u("div",it,[e("div",rt,[e("ul",null,[e("li",{class:f({"is-active":t.value}),onClick:i[0]||(i[0]=_(r=>t.value=!0,["prevent"]))},dt,2),e("li",{class:f({"is-active":!t.value}),onClick:i[1]||(i[1]=_(r=>t.value=!1,["prevent"]))},ht,2)])]),e("div",pt,[e("div",_t,[e("div",mt,[e("h2",null,p(t.value?"Login":"Register"),1),e("form",{onSubmit:_(a,["prevent"])},[e("div",ft,[bt,e("div",gt,[k(e("input",{"onUpdate:modelValue":i[2]||(i[2]=r=>c(n).email=r),class:"input",placeholder:"e.g. alexsmith@gmail.com",type:"email"},null,512),[[V,c(n).email]])])]),e("div",yt,[$t,e("div",Nt,[k(e("input",{"onUpdate:modelValue":i[3]||(i[3]=r=>c(n).password=r),class:"input",placeholder:"...",type:"password"},null,512),[[V,c(n).password]])])]),kt],40,vt)])])])]))}},wt=[{path:"/",name:"notes",component:Xe},{path:"/editNote/:id",name:"edit-note",component:et},{path:"/stats",name:"stats",component:lt},{path:"/auth",name:"auth",component:Ct}],A=pe({history:_e(),routes:wt});A.beforeEach(async(s,t)=>{});const T=me();T.use(({store:s})=>{s.router=ve(A)});fe(Ue).use(T).use(A).mount("#app");

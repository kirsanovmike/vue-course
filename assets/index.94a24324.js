import{i as T,g as q,a as F,d as E,o as P,c as W,s as Y,b as z,r as h,e as H,f as V,h as d,j as u,k as e,n as v,w as _,u as c,t as p,l as y,m as x,p as f,q as k,v as L,x as b,F as D,y as j,z as G,A as X,B as J,C as Q,D as w,E as Z,G as ee,H as te,I as se,J as N,K as oe,L as ae,M as ne,N as le,O as ie,P as re,Q as S,R as ce,S as de,T as ue,U as he,V as pe,W as _e,X as me}from"./vendor.e1dcaf7a.js";const ve=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}};ve();const fe={apiKey:"AIzaSyAratVSSTqOUOp5KKIgn4eK1W2abM17Fq0",authDomain:"noteballs-996a7.firebaseapp.com",projectId:"noteballs-996a7",storageBucket:"noteballs-996a7.appspot.com",messagingSenderId:"320251490867",appId:"1:320251490867:web:3daab6282d194e4ad32946",measurementId:"G-YXV68W5YVT"},I=T(fe),$=q(I),g=F(I),R=E("storeAuth",{state:()=>({user:{}}),actions:{init(){P(g,o=>{o?(this.user.id=o.uid,this.user.email=o.email,this.router.push("/")):(this.user={},this.router.replace("/auth"))})},registerUser({email:o,password:s}){W(g,o,s).then(t=>{t.user}).catch(t=>{console.error(t)})},logInUser({email:o,password:s}){Y(g,o,s).then(t=>{t.user}).catch(t=>{console.error(t)})},logOutUser(){z(g).then(()=>{}).catch(o=>{})}}});const be={"aria-label":"main navigation",class:"navbar is-success",role:"navigation"},ge={class:"container is-max-desktop px-2"},ye=e("div",{class:"navbar-item is-size-4 is-family-monospace"}," Noteballs ",-1),$e=e("span",{"aria-hidden":"true"},null,-1),Ne=e("span",{"aria-hidden":"true"},null,-1),ke=e("span",{"aria-hidden":"true"},null,-1),Ce=[$e,Ne,ke],we=["onClick"],xe={class:"navbar-end"},Se=k(" Notes "),Ve=k(" Stats "),Re={setup(o){const s=R(),t=h(!1),n=h(null),a=h(null);H(n,i=>t.value=!1,{ignore:[a]});const l=()=>{t.value=!1,s.logOutUser()};return(i,r)=>{const m=V("RouterLink");return d(),u("nav",be,[e("div",ge,[e("div",{ref_key:"navTitleRef",ref:a,class:"navbar-brand"},[ye,e("a",{class:v([{"is-active":t.value},"navbar-burger"]),"aria-expanded":"false","aria-label":"menu","data-target":"navbarBasicExample",role:"button",onClick:r[0]||(r[0]=_(A=>t.value=!t.value,["prevent"]))},Ce,2),c(s).user.id?(d(),u("button",{key:0,class:"button is-primary",onClick:_(l,["prevent"])},"Log out "+p(c(s).user.email),9,we)):y("",!0)],512),e("div",{id:"navbarBasicExample",ref_key:"navbarRef",ref:n,class:v([{"is-active":t.value},"navbar-menu"])},[e("div",xe,[c(s).user.id?(d(),x(m,{key:0,"active-class":"is-active",class:"navbar-item",to:"/",onClick:r[1]||(r[1]=A=>t.value=!1)},{default:f(()=>[Se]),_:1})):y("",!0),c(s).user.id?(d(),x(m,{key:1,"active-class":"is-active",class:"navbar-item",to:"/stats",onClick:r[2]||(r[2]=A=>t.value=!1)},{default:f(()=>[Ve]),_:1})):y("",!0)])],2)])])}}};const Ae={class:"container is-max-desktop px-2 py-4"},Ee={setup(o){const s=R();return L(()=>{s.init()}),(t,n)=>{const a=V("RouterView");return d(),u(D,null,[b(Re),e("div",Ae,[b(a)])],64)}}},Le=j(X($,"notes"),G("id","desc")),C=E("storeNotes",{state:()=>({notes:[]}),actions:{async getNotes(){try{J(Le,o=>{this.notes=[],o.forEach(s=>{this.notes.push({id:s.id,content:s.data().content})})})}catch(o){console.error("Error fetching notes: ",o)}},async addNote(o){let s=new Date().getTime(),t=s.toString();await Q(w($,"notes",t),{id:t,content:o})},async deleteNote(o){await Z(w($,"notes",o))},async updateNote(o,s){let t=this.notes.findIndex(a=>a.id===o);this.notes[t].content=s;const n=w($,"notes",o);await ee(n,{content:s})}},getters:{getNoteContent:o=>s=>o.notes.filter(t=>t.id===s)[0].content,totalNotesCount:o=>o.notes.length,totalCharactersCount:o=>{let s=0;return o.notes.forEach(t=>{s+=t.content.length}),s}}}),De={class:"card mb-4"},Ie={class:"card-content"},Ue={class:"content"},Oe={class:"has-text-left has-text-grey-light mt-2"},Be={class:"has-text-right has-text-grey-light mt-2"},Me={class:"card-footer"},Ke=k(" Edit "),Te={props:{note:{type:Object,required:!0}},setup(o){const s=o,t=C(),n=te(()=>{let l=s.note.content.length,i=l>1?"characters":"character";return`${l} ${i}`}),a=l=>se(new Date(+l),"DD.MM.YYYY HH:mm:ss").value;return(l,i)=>{const r=V("RouterLink");return d(),u("div",De,[e("div",Ie,[e("div",Ue,[k(p(o.note.content)+" ",1),e("div",Oe,[e("small",null,p(a(o.note.id)),1)]),e("div",Be,[e("small",null,p(c(n)),1)])])]),e("footer",Me,[b(r,{to:`/editNote/${o.note.id}`,class:"card-footer-item",href:"#"},{default:f(()=>[Ke]),_:1},8,["to"]),e("a",{class:"card-footer-item",href:"#",onClick:i[0]||(i[0]=_(m=>c(t).deleteNote(o.note.id),["prevent"]))}," Delete ")])])}}},U={mounted:o=>{o.focus()}},qe={key:0,class:"label has-text-white"},Fe={class:"field"},Pe={class:"control"},We=["placeholder","value"],Ye={class:"field is-grouped is-grouped-right"},ze={class:"control"},O={props:{modelValue:{type:String,required:!0},bgColor:{type:String,default:"success"},placeholder:{type:String,default:"Type something..."},label:{type:String}},emits:["update:modelValue"],setup(o,{emit:s}){const t=o;return(n,a)=>(d(),u("div",{class:v([`has-background-${o.bgColor}-dark`,"card p-4 mb-5"])},[o.label?(d(),u("label",qe,p(o.label),1)):y("",!0),e("div",Fe,[e("div",Pe,[N(e("textarea",{placeholder:o.placeholder,value:t.modelValue,class:"textarea",onInput:a[0]||(a[0]=l=>n.$emit("update:modelValue",l.target.value))},null,40,We),[[c(U)]])])]),e("div",Ye,[e("div",ze,[oe(n.$slots,"buttons")])])],2))}};function B(o,s){ae(o,t=>{t.length>s&&alert(`Max only ${s} length note!!!`)},{immediate:!0})}const He={class:"notes"},je=["disabled"],Ge={setup(o){const s=C();L(async()=>{await s.getNotes()});const t=h(""),n=h(null),a=()=>{t.value!==""&&t.value!=null&&(s.addNote(t.value),t.value="")};return B(t,30),(l,i)=>(d(),u("div",He,[b(O,{ref_key:"addEditNoteRef",ref:n,modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),placeholder:"Add a new note",onKeydown:ne(_(a,["exact","prevent"]),["enter"])},{buttons:f(()=>[e("button",{disabled:t.value==="",class:"button is-link has-background-success",onClick:a}," Add New Note ",8,je)]),_:1},8,["modelValue","onKeydown"]),(d(!0),u(D,null,le(c(s).notes,r=>(d(),x(Te,{key:r.id,note:r},null,8,["note"]))),128))]))}},Xe={class:"edit-note"},Je=["disabled"],Qe={setup(o){const s=ie(),t=re(),n=C(),a=h("");a.value=n.getNoteContent(s.params.id);const l=()=>{n.updateNote(s.params.id,a.value),t.replace("/")};return(i,r)=>(d(),u("div",Xe,[b(O,{ref:"addEditNoteRef",modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=m=>a.value=m),bgColor:"link",label:"Edit Note",placeholder:"Edit note"},{buttons:f(()=>[e("button",{class:"button is-link is-light mr-2",onClick:r[0]||(r[0]=m=>i.$router.back())}," Cancel "),e("button",{disabled:!a.value,class:"button is-link has-background-link",onClick:l}," Save Note ",8,Je)]),_:1},8,["modelValue"])]))}},Ze={class:"stats"},et={class:"table is-fullwidth"},tt=e("thead",null,[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1),st=e("td",null,"Number of Notes",-1),ot=e("td",null,"Number of Characters (of all notes)",-1),at={setup(o){const s=C();let t=h("");return B(t,20),(n,a)=>(d(),u("div",Ze,[e("table",et,[tt,e("tbody",null,[e("tr",null,[st,e("td",null,p(c(s).totalNotesCount),1)]),e("tr",null,[ot,e("td",null,p(c(s).totalCharactersCount),1)])])]),N(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>ce(t)?t.value=l:t=l),class:"input",placeholder:"Insert value",type:"text"},null,512),[[S,c(t)],[c(U)]])]))}},nt={class:"auth"},lt={class:"tabs is-centered"},it=e("a",null,"Login",-1),rt=[it],ct=e("a",null,"Register",-1),dt=[ct],ut={class:"card"},ht={class:"card-content"},pt={class:"content"},_t=["onSubmit"],mt={class:"field"},vt=e("label",{class:"label"},"Email",-1),ft={class:"control"},bt={class:"field"},gt=e("label",{class:"label"},"Password",-1),yt={class:"control"},$t=e("button",{class:"button is-primary"},"Submit",-1),Nt={setup(o){const s=h(!0),t=R(),n=de({email:"",password:""}),a=()=>{!n.password||!n.email?alert("Fill the field!s"):s.value?t.logInUser(n):t.registerUser(n)};return(l,i)=>(d(),u("div",nt,[e("div",lt,[e("ul",null,[e("li",{class:v({"is-active":s.value}),onClick:i[0]||(i[0]=_(r=>s.value=!0,["prevent"]))},rt,2),e("li",{class:v({"is-active":!s.value}),onClick:i[1]||(i[1]=_(r=>s.value=!1,["prevent"]))},dt,2)])]),e("div",ut,[e("div",ht,[e("div",pt,[e("h2",null,p(s.value?"Login":"Register"),1),e("form",{onSubmit:_(a,["prevent"])},[e("div",mt,[vt,e("div",ft,[N(e("input",{"onUpdate:modelValue":i[2]||(i[2]=r=>c(n).email=r),class:"input",placeholder:"e.g. alexsmith@gmail.com",type:"email"},null,512),[[S,c(n).email]])])]),e("div",bt,[gt,e("div",yt,[N(e("input",{"onUpdate:modelValue":i[3]||(i[3]=r=>c(n).password=r),class:"input",placeholder:"...",type:"password"},null,512),[[S,c(n).password]])])]),$t],40,_t)])])])]))}},kt=[{path:"/",name:"notes",component:Ge},{path:"/editNote/:id",name:"edit-note",component:Qe},{path:"/stats",name:"stats",component:at},{path:"/auth",name:"auth",component:Nt}],M=ue({history:he(),routes:kt}),K=pe();K.use(({store:o})=>{o.router=_e(M)});me(Ee).use(K).use(M).mount("#app");
